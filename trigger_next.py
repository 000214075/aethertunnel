#!/usr/bin/env python3
"""
ç›´æ¥è§¦å‘ä¸‹ä¸€ä¸ªè§’è‰²çš„è„šæœ¬
"""

import os
from datetime import datetime

def trigger_next_role():
    """è§¦å‘ä¸‹ä¸€ä¸ªè§’è‰²"""
    role_order = [
        "GitHubå‡­è¯é…ç½®",
        "é‡è¦æŒ‡ä»¤é€šçŸ¥",
        "æŠ€æœ¯äººäº‹æ€»ç®¡",
        "DevOpså·¥ç¨‹å¸ˆ",
        "é¦–å¸­å¼€å‘å·¥ç¨‹å¸ˆ",
        "è´¨é‡ä¿è¯æµ‹è¯•å·¥ç¨‹å¸ˆ",
        "å®‰å…¨å·¥ç¨‹å¸ˆ",
        "ç³»ç»Ÿæ¶æ„å¸ˆ",
        "æ€§èƒ½å·¥ç¨‹å¸ˆ",
        "æ–‡æ¡£å·¥ç¨‹å¸ˆ",
        "ç”¨æˆ·ä½“éªŒè®¾è®¡å¸ˆ",
        "äº§å“ç»ç†",
        "é¡¹ç›®ç»ç†",
        "æ•°æ®åˆ†æå¸ˆ",
        "ç§»åŠ¨ç«¯å¼€å‘å·¥ç¨‹å¸ˆ",
        "AI/æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆ",
        "æŠ€æœ¯æ”¯æŒå·¥ç¨‹å¸ˆ",
        "åŒºå—é“¾å¼€å‘å·¥ç¨‹å¸ˆ",
        "é‡å­å¯†ç å­¦ä¸“å®¶",
        "è¾¹ç¼˜è®¡ç®—å·¥ç¨‹å¸ˆ",
        "å›½é™…å¸‚åœºæ‹“å±•ç»ç†"
    ]

    # è¯»å–å½“å‰çŠ¶æ€
    with open("SCHEDULING_STATE.md", 'r', encoding='utf-8') as f:
        content = f.read()

    # æ‰¾åˆ°ç¬¬ä¸€ä¸ªæœªå®Œæˆçš„è§’è‰²
    for role in role_order:
        if f"| {role} | âœ… completed" in content:
            continue
        elif f"| {role} | â³ pending" in content:
            print(f"\n{'='*60}")
            print(f"ğŸš€ è§¦å‘è§’è‰²: {role}")
            print(f"{'='*60}")
            print(f"ğŸ• è§¦å‘æ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
            print(f"ğŸ“‹ ä»»åŠ¡ä¸Šä¸‹æ–‡: AetherTunnelé¡¹ç›®è‡ªåŠ¨è§¦å‘ç³»ç»Ÿåˆå§‹åŒ–")
            print(f"ğŸ’¡ å®é™…åº”è¯¥è°ƒç”¨: sessions_send å‘ {role} å‘é€å”¤é†’æ¶ˆæ¯")
            print(f"{'='*60}\n")
            return

    print("âœ… æ‰€æœ‰è§’è‰²å·²æ‰§è¡Œå®Œæˆï¼")

if __name__ == "__main__":
    trigger_next_role()
